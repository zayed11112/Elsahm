# إعداد نظام إتمام الحجز (Checkout System)

## نظرة عامة
نظام إتمام الحجز مصمم لتسهيل عملية إتمام حجز العقارات في تطبيق السهم. يتيح هذا النظام للمستخدمين:
- إدخال بياناتهم الشخصية والجامعية
- إتمام عملية الحجز بشكل كامل
- تتبع حالة طلبات الحجز
- إدارة العمولات والعربون

## هيكل البيانات

### جدول قاعدة البيانات (checkout_requests)
تم إنشاء جدول في Supabase بالحقول التالية:
- `id`: معرف فريد لكل طلب (UUID)
- `user_id`: معرف المستخدم المرتبط بالطلب
- `property_id`: معرف العقار المراد حجزه
- `property_name`: اسم العقار
- `customer_name`: اسم العميل
- `customer_phone`: رقم هاتف العميل
- `university_id`: الرقم الجامعي
- `college`: الكلية
- `status`: حالة الطلب (جاري المعالجة، مؤكد، ملغي)
- `commission`: قيمة العمولة
- `deposit`: قيمة العربون
- `created_at`: تاريخ إنشاء الطلب
- `updated_at`: تاريخ تحديث الطلب

## المكونات البرمجية

### النماذج (Models)
- `checkout_request.dart`: نموذج بيانات طلب إتمام الحجز

### الخدمات (Services)
- `checkout_service.dart`: خدمة التعامل مع قاعدة بيانات Supabase للعمليات التالية:
  - إضافة طلب حجز جديد
  - جلب طلبات الحجز للمستخدم
  - جلب طلبات الحجز للعقار
  - تحديث حالة طلب الحجز
  - تحديث بيانات العمولة والعربون
  - حذف طلب حجز

### الشاشات (Screens)
- `checkout_screen.dart`: صفحة نموذج إتمام الحجز
- `checkout_list_screen.dart`: صفحة عرض قائمة طلبات إتمام الحجز

## كيفية الاستخدام

### للمستخدمين
1. يبدأ المستخدم من صفحة تفاصيل العقار
2. ينقر على زر "طلب حجز"
3. يُعرض نموذج تأكيد قبل الانتقال لصفحة إتمام الحجز
4. ينتقل المستخدم إلى صفحة إتمام الحجز ويملأ البيانات المطلوبة
5. يضغط على زر "تأكيد الحجز" لإتمام العملية
6. يمكن للمستخدم مراجعة طلبات إتمام الحجز الخاصة به من خلال قائمة "المزيد" ثم "طلبات إتمام الحجز"

### للمطورين
لإضافة صفحة إتمام الحجز إلى شاشة جديدة:

```dart
Navigator.push(
  context,
  MaterialPageRoute(
    builder: (context) => CheckoutScreen(
      propertyId: 'معرف_العقار',
      propertyName: 'اسم_العقار',
      propertyPrice: 1000.0,
      imageUrl: 'رابط_الصورة', // اختياري
    ),
  ),
);
```

## الخطوات المستقبلية
- إضافة نظام إشعارات لإعلام المستخدم بتغييرات حالة الطلب
- تحسين واجهة المستخدم وإضافة المزيد من الخيارات
- إضافة خيارات الدفع الإلكتروني
- إضافة لوحة تحكم للإدارة للموافقة على طلبات إتمام الحجز 